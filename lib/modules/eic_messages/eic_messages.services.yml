services:
  eic_messages.queued_message_checker:
    class: Drupal\eic_messages\Util\QueuedMessageChecker
    arguments: [ '@datetime.time', '@config.factory', '@current_user', '@entity_type.manager' ]
  eic_messages.message_bus:
    class: Drupal\eic_messages\Service\MessageBus
    arguments: [ '@eic_messages.queued_message_checker' ]
    tags:
      - { name: service_collector, tag: message_producer, call: addHandler }

<<<<<<< HEAD
  # Message creator services
  eic_messages.message_creator.group:
    class: Drupal\eic_messages\Service\GroupMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user', '@entity_type.manager', '@eic_messages.helper', '@eic_user.helper']
  eic_messages.message_creator.group_content:
    class: Drupal\eic_messages\Service\GroupContentMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user','@entity_type.manager', '@eic_messages.helper', '@eic_user.helper']
  eic_messages.message_creator.request:
    class: Drupal\eic_messages\Service\RequestMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user','@entity_type.manager', '@eic_messages.helper', '@eic_user.helper', '@eic_flags.handler_collector', '@renderer']
  eic_messages.message_creator.comment:
    class: Drupal\eic_messages\Service\CommentMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user','@entity_type.manager', '@eic_messages.helper', '@eic_user.helper', '@eic_content.helper']
  eic_messages.message_creator.node:
    class: Drupal\eic_messages\Service\NodeMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user','@entity_type.manager', '@eic_messages.helper', '@eic_user.helper', '@eic_content.helper']
  eic_messages.message_creator.entity_block:
    class: Drupal\eic_messages\Service\EntityBlockMessageCreator
    arguments: ['@datetime.time', '@config.factory', '@current_user', '@entity_type.manager', '@eic_messages.helper', '@eic_user.helper']

  # Message event subscribers
  eic_messages.flag_event_subscriber:
    class: Drupal\eic_messages\EventSubscriber\FlagEventSubscriber
    arguments: ['@eic_messages.message_creator.entity_block']
    tags:
      - { name: event_subscriber }
=======
  eic_messages.stream_handler:
    class: Drupal\eic_messages\Handler\StreamHandler
    arguments: [ '@entity_type.manager' ]
    tags:
      - { name: message_producer }
  eic_messages.notification_handler:
    class: Drupal\eic_messages\Handler\NotificationHandler
    tags:
      - { name: message_producer }
    calls:
      - [ setQueue, [ '@queue' ] ]
>>>>>>> 4e0722732c640fbe58d3fe7e4b881a0714c52046
