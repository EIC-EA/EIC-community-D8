{#
/**
 * @file
 * Default template for a pending/draft group's message box.
 *
 * Available variables:
 * - group: The group being displayed
 * - edit_link: Relative path to the edit form
 * - delete_link: Relative path to the delete form
 * - invite_link: Relative path to the add form for a group_invitation
 * - has_content: Boolean indicating whether or not the group has content
 * - has_member: Boolean indicating whether or not the group has admins or members
 * - actions: Array of content operations
 *
 * @ingroup themeable
 */
#}
{% set moderation_state = group.moderation_state.value %}

{% if moderation_state == 'pending' %}
  <h2>Awaiting approval</h2>
  <p>This group is pending approval from our community team. We will endeavour to approve the group within 3 days.</p>
  <p>You can still <a href="{{ edit_link }}">manage</a> or <a href="{{ delete_link }}">delete</a> your group</p>
{% elseif moderation_state == 'draft' %}
  <h2>Congratulations! Group approved</h2>
  <p>We advise these steps to make your group ready:</p>
  <ul>
    <li>Configure your group: configure a welcome message for your GM's, configure the content section</li>
    <li>Create content in the group</li>
    <li>Publish your group</li>
  </ul>
  <p><a href="#">Click here</a> if you need additional help</p>
{% elseif moderation_state == 'published' and has_member == false %}
  <h2>Great! Your group is published. Now invite people to the group</h2>
  <p><a href="{{ invite_link }}">Invite users</a> so they can contribute and engage with your group.</p>
  <p><a href="{{ edit_link }}">Click here</a> if you want to make any changes to the settings of your group.</p>
{% endif %}

{% if actions is not empty and (moderation_state == 'draft' or moderation_state == 'published') and has_content == false %}
  <h2>Get the conversation started</h2>
  <p>Start discussions with other members.</p>
  <div class="ecl-editorial-header__actions">
    {% for action in actions %}
      <div class="ecl-editorial-header__action">
        {% set trigger = '' %}

        {% if action.items %}
          {% set trigger %}
            {% include "@ecl-twig/ec-component-button/ecl-button.html.twig" with {
              extra_classes: action.extra_classes|default('') ~ 'ecl-button--has-icon-layout',
              icon: icon_file_path ? action.icon|default({})|merge({
                path: icon_file_path,
                size: 's',
              }),
              label: action.label|default(action.link.label),
            } %}
          {% endset %}

          {% include "@theme/patterns/compositions/collapsible-options.html.twig" with {
            extra_classes: 'ecl-collapsible-options--aligns-from-right',
            collapse_label: action.label|default(action.link.label),
            icon_file_path: icon_file_path,
            items: action.items,
            trigger: action.is_compact and icon_file_path ? trigger : NULL,
          } only %}
        {% else %}
          {% if action is not empty %}
            {% if action.link %}
              {% include "@ecl-twig/ec-component-link/ecl-link.html.twig" with action|default({})|merge({
                link: action.link|default({})|merge({
                  icon_position: 'before',
                }),
                icon: icon_file_path ? action.icon|default({})|merge({
                  path: icon_file_path,
                  size: 's',
                }) : {},
                extra_classes: 'ecl-link--button ecl-link--button-primary' ~ (action.is_compact ? ' ecl-link--button-has-icon-layout ecl-link--action'),
              }) only %}
            {% elseif action is not empty %}
              {% if action.link %}
                {% include "@ecl-twig/ec-component-link/ecl-link.html.twig" with action|default({})|merge({
                  link: action.link|merge({
                    icon_position: 'before',
                  }),
                  icon: icon_file_path ? action.icon|default({})|merge({
                    path: icon_file_path,
                    size: 's',
                  }) : {},
                  extra_classes: (actions[0].items and not loop.first) or loop.first ? 'ecl-link--button ecl-link--button-primary' : 'ecl-link--button ecl-link--button-secondary' ~ (action.is_compact ? 'ecl-link--button-has-icon-layout'),
                }) only %}
              {% else %}
                {% include "@ecl-twig/ec-component-button/ecl-button.html.twig" with action|default({})|merge({
                  icon_position: 'before',
                  extra_classes: action.is_compact ? 'ecl-button--has-icon-layout',
                  variant: (actions[0].items and not loop.first) or loop.first ? 'primary' : 'secondary',
                  icon: icon_file_path ? action.icon|default({})|merge({
                    path: icon_file_path,
                    size: 's',
                  }) : {},
                }) only %}
              {% endif %}
            {% endif %}
          {% endif %}
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endif %}
