.ecl-discussion-thread {
  $node: &;

  padding: ecl-box-model('padding');
  box-sizing: border-box;
  background-color: map-get($ecl-colors, 'grey-5');
  border-left: solid 4px transparent;

  [class*="ecl-section-wrapper--is-"]:not(.ecl-section-wrapper--is-white) [class*="ecl-featured-content"] &,
  .ecl-section-wrapper:not([class*="ecl-section-wrapper--is-"])~.ecl-section-wrapper:not([class*="ecl-section-wrapper--is-"]):nth-child(2n + 1) & {
    background-color: map-get($ecl-colors, 'white');
  }

  &--is-highlighted {
    border-color: ecl-typography('color', 'title');
    background-color: map-get($ecl-colors, 'blue-5');
  }

  &--has-compact-layout {
    padding: ecl-box-model('padding', 'controls');
  }

  &__main {
    display: flex;
    padding-bottom: ecl-box-model('padding');
    margin-bottom: ecl-box-model('padding');
    border-bottom: ecl-border();

    #{$node}--has-compact-layout & {
      padding-bottom: ecl-box-model('margin', 'controls');
      margin-bottom: ecl-box-model('margin', 'controls');
    }

    &:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
  }

  &__image-wrapper {
    flex-shrink: 0;
    padding-right: ecl-box-model('padding');

    #{$node}--has-compact-layout & {
      padding-right: ecl-box-model('padding', 'controls');
    }
  }

  &__content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    max-width: 100%;
  }

  &__title {
    margin-top: 0;
    @include ecl-responsive-font('label');
  }

  &__description {
    margin-top: 0;
    text-overflow: ellipsis;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 5; /* number of lines to show */
    -webkit-box-orient: vertical;
    @include ecl-responsive-font('label');

    #{$node}--has-compact-layout & {
      @include visually-hidden;
    }
  }

  &__toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  &__type {
    display: flex;
    align-items: center;
    color: ecl-typography('color', 'meta');
    text-transform: uppercase;
    @include ecl-responsive-font('meta');
  }

  &__type-icon {
    color: ecl-typography('color', 'title');
    margin-right: ecl-box-model('margin', 'controls');
  }

  &__highlight {
    margin-left: auto;
    background-color: transparent;
    color: map-get($ecl-colors, 'blue-25');
    line-height: 0;
    outline: none;
    border: 0;
    position: relative;
    padding: map-get($ecl-spacing, 'xs');

    &::before {
      position: absolute;
      content: " ";
      top: 50%;
      display: block;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40%;
      height: 40%;
      border-radius: 50%;
      background-color: map-get($ecl-colors, 'white');
    }

    &:hover,
    #{$node}--is-highlighted & {
      color: map-get($ecl-colors, 'yellow-100');
      opacity: 1;

      &::before {
        background-color: map-get($ecl-colors, 'black');
      }
    }
  }

  &__highlight-icon {
    margin: 0;
    display: block;
    position: relative;
  }

  &__header {
    display: flex;
    justify-content: space-between;
    order: 1;
  }

  &__meta,
  &__featured-items {
    @include ecl-media-breakpoint-up('md') {
      padding-left: calc(#{map-get($ecl-media, 'xs')} + 1.25rem);
    }
  }

  &__featured-items {
    padding-top: ecl-box-model('padding');
    margin-top: ecl-box-model('padding');
    border-top: ecl-border();

    #{$node}--has-compact-layout & {
      padding-top: ecl-box-model('margin', 'controls');
      margin-top: ecl-box-model('margin', 'controls');
    }
  }

  &__meta {
    display: flex;
    position: relative;
    flex-wrap: wrap;
    gap: ecl-box-model('margin', 'controls');
    @include ecl-media-breakpoint-up('md') {
      align-items: center;
      flex-direction: row;
    }
  }

  &__highlight-label,
  &__started-by-label {
    @include visually-hidden;
  }

  &__author,
  & &__timestamp {
    margin: 0 ecl-box-model('padding') 0 0;
  }

  &__timestamp {
    @include ecl-responsive-font('label');
  }

  &__author {
    @include ecl-responsive-font('label');
    font-weight: $ecl-font-weight-bold;
  }

  &__members,
  &__stats {
    flex-shrink: 0;
    margin-left: auto;
  }

  &__members {
    #{$node}--has-compact-layout & {
      display: none;
    }
  }

  &__tags {
    margin-right: ecl-box-model('padding');
  }

  &__stats-items,
  &__tags-items {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: #{0 - ecl-box-model('margin', 'controls')};
    margin-right: #{0 - ecl-box-model('margin', 'controls')};
  }

  &__stats-item,
  &__tags-item {
    display: flex;
    flex-shrink: 0;
    margin-right: ecl-box-model('margin', 'controls');
    margin-bottom: ecl-box-model('margin', 'controls');
  }

  &__stats-item {
    align-items: center;
    color: ecl-typography('color', 'meta');
    @include ecl-responsive-font('label');
  }

  &__stats-item-label {
    @include visually-hidden;
  }

  &__stats-item-icon {
    margin-right: $ecl-spacing-2-xs;
  }

  & &__tag {
    @include ecl-responsive-font('meta');
    background: map-get($ecl-colors, 'white');
    text-decoration: none;
    color: ecl-typography('color', 'title');
    padding: map-get($ecl-spacing, '2xs') map-get($ecl-spacing, 'xs');
  }

  & .ecl-comment-thread {
    padding: 0;
  }

  &__comment-thread {
    .ecl-comment {
      background-color: map-get($ecl-colors, 'white');
      padding: ecl-box-model('padding');

      &__header-main {
        display: flex;
      }

      &__author {
        left: 1rem;
        &-info {
          @include ecl-media-breakpoint-down('md') {
            padding-left: 1.5rem !important;
          }
          flex-grow: 1;
        }
      }

      &__footer {
        display: none;
      }
    }
  }
}
